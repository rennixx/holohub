# =============================================================================
# HoloHub Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values for your environment

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
APP_NAME=HoloHub
APP_ENV=development
DEBUG=true
API_V1_PREFIX=/api/v1

# Server
HOST=0.0.0.0
PORT=8000

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://holohub:holohub_dev@localhost:5432/holohub

# Database Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0
REDIS_DECODE_RESPONSES=true

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# Generate with: openssl rand -hex 32
SECRET_KEY=change-me-in-production-use-openssl-rand-hex-32

# JWT Settings
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Requirements
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL=true

# MFA Encryption Key (for storing TOTP secrets)
# Generate with: openssl rand -hex 32
MFA_ENCRYPTION_KEY=change-me-in-production-use-openssl-rand-hex-32

# Account Lockout
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_MINUTES=15

# -----------------------------------------------------------------------------
# S3/MinIO Storage
# -----------------------------------------------------------------------------
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET=holohub-dev
S3_REGION=us-east-1
S3_USE_SSL=false

# Asset Settings
MAX_UPLOAD_SIZE_MB=500
ALLOWED_FILE_EXTENSIONS=.glb,.gltf,.obj,.fbx,.usdz

# -----------------------------------------------------------------------------
# CORS
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:8000
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STORAGE_URI=redis://localhost:6379/1

# Rate Limits (requests per time period)
RATE_LIMIT_LOGIN=5/15minutes
RATE_LIMIT_REGISTER=3/hour
RATE_LIMIT_REFRESH=10/minute
RATE_LIMIT_GENERAL=100/minute
RATE_LIMIT_UPLOAD=10/hour

# -----------------------------------------------------------------------------
# Celery (Background Tasks)
# -----------------------------------------------------------------------------
CELERY_BROKER_URL=redis://localhost:6379/2
CELERY_RESULT_BACKEND=redis://localhost:6379/3
CELERY_TASK_TRACKED=true
CELERY_TASK_TIME_LIMIT=3600
CELERY_TASK_SOFT_TIME_LIMIT=3000

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# TimescaleDB (Time-series data)
# -----------------------------------------------------------------------------
TIMESCALEDB_ENABLED=true
TIMESCALEDB_RETENTION_DAYS=90

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
# Sentry (Error tracking)
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PATH=/metrics

# OpenTelemetry
OTEL_SERVICE_NAME=holohub-api
OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1

# -----------------------------------------------------------------------------
# Email (for notifications, password reset)
# -----------------------------------------------------------------------------
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@holohub.com
SMTP_USE_TLS=true

# -----------------------------------------------------------------------------
# Stripe (Billing - optional)
# -----------------------------------------------------------------------------
STRIPE_API_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PRICE_ID_PRO=
STRIPE_PRICE_ID_ENTERPRISE=

# -----------------------------------------------------------------------------
# CDN (CloudFront - optional for production)
# -----------------------------------------------------------------------------
CLOUDFRONT_DOMAIN=
CLOUDFRONT_KEY_ID=
CLOUDFRONT_PRIVATE_KEY_PATH=
CLOUDFRONT_URL_EXPIRATION_HOURS=8760

# -----------------------------------------------------------------------------
# WebSocket
# -----------------------------------------------------------------------------
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_MAX_CONNECTIONS=10000
WEBSOCKET_MESSAGE_QUEUE_SIZE=100

# -----------------------------------------------------------------------------
# Device Settings
# -----------------------------------------------------------------------------
# Device authentication
DEVICE_TOKEN_EXPIRE_DAYS=30
DEVICE_ACTIVATION_CODE_LENGTH=9

# Device offline tolerance
DEVICE_OFFLINE_THRESHOLD_MINUTES=5
DEVICE_OFFLINE_AUTO_DECOMMISSION_DAYS=30

# -----------------------------------------------------------------------------
# Testing
# -----------------------------------------------------------------------------
TEST_DATABASE_URL=postgresql+asyncpg://holohub:holohub_test@localhost:5432/holohub_test
TEST_REDIS_URL=redis://localhost:6379/15
